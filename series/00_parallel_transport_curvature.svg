<svg viewBox="0 90 900 500" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrowhead4" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333" />
    </marker>
    <marker id="arrowhead-red2" markerWidth="12" markerHeight="12" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 12 3.5, 0 7" fill="#fa5252" />
    </marker>
    <marker id="arrowhead-blue2" markerWidth="12" markerHeight="12" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 12 3.5, 0 7" fill="#228be6" />
    </marker>
    <radialGradient id="sphereGrad3" cx="35%" cy="35%">
      <stop offset="0%" style="stop-color:#e0f0ff;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#4080c0;stop-opacity:1" />
    </radialGradient>
  </defs>
  
  <!-- Main sphere -->
  <g id="main-sphere">
    <circle cx="450" cy="320" r="200" fill="url(#sphereGrad3)" stroke="#2060a0" stroke-width="2.5"/>
    
    <!-- Equator -->
    <ellipse cx="450" cy="320" rx="200" ry="40" fill="none" stroke="#364fc7" stroke-width="2" stroke-dasharray="8,4"/>
    <text x="660" y="325" font-family="Arial, sans-serif" font-size="13" fill="#364fc7" font-weight="bold">赤道</text>
    
    <!-- Meridians -->
    <ellipse cx="450" cy="320" rx="40" ry="200" fill="none" stroke="#5c7cfa" stroke-width="1.5" opacity="0.5"/>
    <ellipse cx="450" cy="320" rx="120" ry="200" fill="none" stroke="#5c7cfa" stroke-width="1.5" opacity="0.5"/>
    
    <!-- North pole -->
    <circle cx="450" cy="120" r="6" fill="#fa5252"/>
    <text x="480" y="115" font-family="Arial, sans-serif" font-size="14" fill="#333" font-weight="bold">北極 (N)</text>
    
    <!-- Point A on equator -->
    <circle cx="650" cy="320" r="5" fill="#37b24d"/>
    <text x="665" y="315" font-family="Arial, sans-serif" font-size="13" fill="#37b24d" font-weight="bold">点 A</text>
    
    <!-- Point B on equator (90 degrees away) -->
    <circle cx="450" cy="360" r="5" fill="#37b24d"/>
    <text x="455" y="385" font-family="Arial, sans-serif" font-size="13" fill="#37b24d" font-weight="bold">点 B</text>
    
    <!-- Path arrows -->
    <!-- Step 1: North to A -->
    <path d="M 460,140 Q 520,200 620,300" fill="none" stroke="#fd7e14" stroke-width="3" marker-end="url(#arrowhead4)"/>
    <text x="540" y="210" font-family="Arial, sans-serif" font-size="13" fill="#fd7e14" font-weight="bold">① 南下</text>
    
    <!-- Step 2: A to B (along equator) -->
    <path d="M 640,325 Q 580,355 470,365" fill="none" stroke="#fd7e14" stroke-width="3" marker-end="url(#arrowhead4)"/>
    <text x="555" y="375" font-family="Arial, sans-serif" font-size="13" fill="#fd7e14" font-weight="bold">② 赤道に沿って90°移動</text>
    
    <!-- Step 3: B to North -->
    <path d="M 455,350 Q 455,250 455,140" fill="none" stroke="#fd7e14" stroke-width="3" marker-end="url(#arrowhead4)"/>
    <text x="385" y="240" font-family="Arial, sans-serif" font-size="13" fill="#fd7e14" font-weight="bold">③ 北上</text>
  </g>
  
  <!-- Vector illustrations at each step -->
  
  <!-- Initial vector at North pole -->
  <g id="vector-start">
    <rect x="70" y="100" width="160" height="120" fill="#fff9db" stroke="#fab005" stroke-width="2" rx="5"/>
    <text x="150" y="125" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#333">北極での初期ベクトル</text>
    
    <!-- North pole (top view) -->
    <circle cx="150" cy="170" r="25" fill="#e0f0ff" stroke="#2060a0" stroke-width="1.5"/>
    <circle cx="150" cy="170" r="2" fill="#fa5252"/>
    
    <!-- Initial vector pointing "south" (downward in this view) -->
    <line x1="150" y1="170" x2="150" y2="195" stroke="#228be6" stroke-width="3" marker-end="url(#arrowhead-blue2)"/>
    <text x="165" y="185" font-family="Arial, sans-serif" font-size="12" fill="#228be6" font-weight="bold">v₀</text>
  </g>
  
  <!-- Vector at point A -->
  <g id="vector-A">
    <rect x="70" y="270" width="160" height="120" fill="#e7f5ff" stroke="#1971c2" stroke-width="2" rx="5"/>
    <text x="150" y="295" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#333">点 A でのベクトル</text>
    
    <!-- Tangent plane at A -->
    <rect x="110" y="320" width="80" height="50" fill="#f8f9fa" stroke="#adb5bd" stroke-width="1"/>
    <circle cx="150" cy="345" r="2" fill="#37b24d"/>
    
    <!-- Vector still pointing "south" (parallel transported) -->
    <line x1="150" y1="345" x2="150" y2="365" stroke="#228be6" stroke-width="3" marker-end="url(#arrowhead-blue2)"/>
    <text x="165" y="358" font-family="Arial, sans-serif" font-size="12" fill="#228be6" font-weight="bold">v₁</text>
    <text x="150" y="385" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#495057" font-style="italic">(平行移動)</text>
  </g>
  
  <!-- Vector back at North pole (rotated) -->
  <g id="vector-end">
    <rect x="70" y="440" width="160" height="120" fill="#ffe8cc" stroke="#e67700" stroke-width="2" rx="5"/>
    <text x="150" y="465" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#333">北極に戻った時</text>
    
    <!-- North pole (top view) -->
    <circle cx="150" cy="510" r="25" fill="#e0f0ff" stroke="#2060a0" stroke-width="1.5"/>
    <circle cx="150" cy="510" r="2" fill="#fa5252"/>
    
    <!-- Initial vector (dashed, for comparison) -->
    <line x1="150" y1="510" x2="150" y2="535" stroke="#adb5bd" stroke-width="2" stroke-dasharray="4,3"/>
    <text x="165" y="525" font-family="Arial, sans-serif" font-size="11" fill="#868e96">v₀</text>
    
    <!-- Final vector (rotated 90 degrees) -->
    <line x1="150" y1="510" x2="175" y2="510" stroke="#fa5252" stroke-width="3" marker-end="url(#arrowhead-red2)"/>
    <text x="180" y="515" font-family="Arial, sans-serif" font-size="12" fill="#fa5252" font-weight="bold">v₂</text>
    
    <!-- Rotation angle -->
    <path d="M 150,522 Q 160,520 165,515" fill="none" stroke="#12b886" stroke-width="2"/>
    <text x="158" y="540" font-family="Arial, sans-serif" font-size="11" fill="#12b886" font-weight="bold">90°回転!</text>
  </g>
  
  <!-- Explanation box -->
  <rect x="670" y="100" width="200" height="180" fill="#f1f3f5" stroke="#495057" stroke-width="2" rx="5"/>
  <text x="770" y="130" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#333">曲率の効果</text>
  
  <text x="770" y="160" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">
    球面は曲がっているため、
  </text>
  <text x="770" y="180" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">
    ベクトルを「平行に」
  </text>
  <text x="770" y="200" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">
    移動しても、元の場所に
  </text>
  <text x="770" y="220" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">
    戻ったときに向きが
  </text>
  <text x="770" y="240" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">
    ズレる。
  </text>
  
  <text x="770" y="265" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#fa5252" font-weight="bold">
    このズレの量が
  </text>
  <text x="770" y="280" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#fa5252" font-weight="bold">
    曲率を反映している
  </text>
  
  <!-- Formula -->
  <text x="450" y="580" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#495057">
    平面 (曲率=0) では、このような回転は起こらない
  </text>
</svg>
