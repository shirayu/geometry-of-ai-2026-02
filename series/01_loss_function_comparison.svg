<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 500">
  <defs>
    <marker id="arrowhead3" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#2c3e50"/>
    </marker>
    <linearGradient id="hingeGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#e74c3c;stop-opacity:1" />
      <stop offset="50%" style="stop-color:#e74c3c;stop-opacity:0.7" />
    </linearGradient>
    <linearGradient id="logGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#3498db;stop-opacity:1" />
      <stop offset="50%" style="stop-color:#3498db;stop-opacity:0.7" />
    </linearGradient>
  </defs>
  
  <!-- Background -->
  <rect width="800" height="500" fill="#f8f9fa"/>
  
  <!-- Title -->
  <text x="400" y="35" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="#2c3e50" text-anchor="middle">損失関数の比較: SVM vs ロジスティック回帰</text>
  
  <!-- Main plot area -->
  <g transform="translate(100, 80)">
    <!-- Axes -->
    <line x1="50" y1="320" x2="650" y2="320" stroke="#2c3e50" stroke-width="2" marker-end="url(#arrowhead3)"/>
    <line x1="300" y1="370" x2="300" y2="20" stroke="#2c3e50" stroke-width="2" marker-end="url(#arrowhead3)"/>
    
    <!-- Axis labels -->
    <text x="660" y="325" font-family="Arial, sans-serif" font-size="14" fill="#2c3e50">y·f(x)</text>
    <text x="310" y="15" font-family="Arial, sans-serif" font-size="14" fill="#2c3e50">損失</text>
    <text x="290" y="340" font-family="Arial, sans-serif" font-size="12" fill="#7f8c8d" text-anchor="end">0</text>
    
    <!-- Grid lines -->
    <line x1="50" y1="220" x2="650" y2="220" stroke="#ecf0f1" stroke-width="1"/>
    <line x1="50" y1="120" x2="650" y2="120" stroke="#ecf0f1" stroke-width="1"/>
    <line x1="200" y1="20" x2="200" y2="320" stroke="#ecf0f1" stroke-width="1"/>
    <line x1="400" y1="20" x2="400" y2="320" stroke="#ecf0f1" stroke-width="1"/>
    <line x1="500" y1="20" x2="500" y2="320" stroke="#ecf0f1" stroke-width="1"/>
    
    <!-- Tick marks and labels -->
    <line x1="200" y1="315" x2="200" y2="325" stroke="#2c3e50" stroke-width="2"/>
    <text x="200" y="340" font-family="Arial, sans-serif" font-size="12" fill="#7f8c8d" text-anchor="middle">-1</text>
    
    <line x1="400" y1="315" x2="400" y2="325" stroke="#2c3e50" stroke-width="2"/>
    <text x="400" y="340" font-family="Arial, sans-serif" font-size="12" fill="#7f8c8d" text-anchor="middle">1</text>
    
    <line x1="500" y1="315" x2="500" y2="325" stroke="#2c3e50" stroke-width="2"/>
    <text x="500" y="340" font-family="Arial, sans-serif" font-size="12" fill="#7f8c8d" text-anchor="middle">2</text>
    
    <line x1="295" y1="120" x2="305" y2="120" stroke="#2c3e50" stroke-width="2"/>
    <text x="285" y="125" font-family="Arial, sans-serif" font-size="12" fill="#7f8c8d" text-anchor="end">2</text>
    
    <line x1="295" y1="220" x2="305" y2="220" stroke="#2c3e50" stroke-width="2"/>
    <text x="285" y="225" font-family="Arial, sans-serif" font-size="12" fill="#7f8c8d" text-anchor="end">1</text>
    
    <!-- Hinge loss (SVM) - piecewise linear -->
    <path d="M 50,20 L 400,320" stroke="#e74c3c" stroke-width="3.5" fill="none" stroke-linecap="round"/>
    <path d="M 400,320 L 650,320" stroke="#e74c3c" stroke-width="3.5" fill="none" stroke-linecap="round"/>
    
    <!-- Logistic loss - smooth curve -->
    <!-- Approximation of log(1 + exp(-z)) -->
    <path d="M 50,20 
             C 100,35 150,60 200,95
             C 250,140 275,180 300,215
             C 325,250 350,280 375,300
             C 400,315 450,322 500,323
             C 550,323.5 600,323.8 650,324" 
          stroke="#3498db" stroke-width="3.5" fill="none" stroke-linecap="round"/>
    
    <!-- Vertical line at margin = 1 -->
    <line x1="400" y1="20" x2="400" y2="320" stroke="#f39c12" stroke-width="2" stroke-dasharray="8,4" opacity="0.7"/>
    <text x="410" y="60" font-family="Arial, sans-serif" font-size="12" fill="#f39c12" font-weight="bold">マージン = 1</text>
    
    <!-- Annotations -->
    <!-- Hinge loss annotation -->
    <g transform="translate(180, 80)">
      <circle cx="0" cy="0" r="4" fill="#e74c3c"/>
      <line x1="5" y1="-5" x2="80" y2="-30" stroke="#e74c3c" stroke-width="1.5"/>
      <text x="85" y="-35" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#e74c3c">ヒンジ損失</text>
      <text x="85" y="-20" font-family="Arial, sans-serif" font-size="11" fill="#c0392b">max(0, 1 - y·f(x))</text>
    </g>
    
    <!-- Logistic loss annotation -->
    <g transform="translate(450, 150)">
      <circle cx="0" cy="0" r="4" fill="#3498db"/>
      <line x1="5" y1="-5" x2="80" y2="-40" stroke="#3498db" stroke-width="1.5"/>
      <text x="85" y="-45" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#3498db">ロジスティック損失</text>
      <text x="85" y="-30" font-family="Arial, sans-serif" font-size="11" fill="#2980b9">log(1 + exp(-y·f(x)))</text>
    </g>
    
    <!-- Key difference highlight -->
    <g transform="translate(480, 310)">
      <rect x="0" y="0" width="150" height="30" fill="#fff9e6" stroke="#f39c12" stroke-width="2" rx="3"/>
      <text x="75" y="12" font-family="Arial, sans-serif" font-size="10" fill="#d68910" text-anchor="middle" font-weight="bold">ヒンジ: ここで損失0</text>
      <text x="75" y="24" font-family="Arial, sans-serif" font-size="9" fill="#d68910" text-anchor="middle">ロジスティック: 常に>0</text>
    </g>
  </g>
  
  <!-- Comparison table -->
  <g transform="translate(100, 410)">
    <rect x="0" y="0" width="600" height="75" fill="white" stroke="#bdc3c7" stroke-width="2" rx="5"/>
    
    <text x="10" y="20" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#2c3e50">重要な違い:</text>
    
    <circle cx="20" cy="37" r="3" fill="#e74c3c"/>
    <text x="30" y="40" font-family="Arial, sans-serif" font-size="11" fill="#34495e">
      <tspan font-weight="bold" fill="#e74c3c">ヒンジ損失 (SVM):</tspan> y·f(x) ≥ 1 で損失0 → マージン外の点は無視 → スパース解(サポートベクター)
    </text>
    
    <circle cx="20" cy="57" r="3" fill="#3498db"/>
    <text x="30" y="60" font-family="Arial, sans-serif" font-size="11" fill="#34495e">
      <tspan font-weight="bold" fill="#3498db">ロジスティック損失:</tspan> 全ての点が損失に寄与 → 確率的な柔らかさ → 確率出力 p(y=1|x)
    </text>
  </g>
</svg>
